{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/Model/Model.js","src/js/Model/Task.js","src/js/app.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/**\n * Base class for all models.\n */\nexport default class Model {\n  constructor() { }\n\n  getNextId(storageName = 'Model') {\n    const data = Model.getStorageData(storageName);\n\n    return parseInt(Object.keys(data).sort().pop() || 0) + 1;\n  }\n\n  save() {\n    return new Promise((resolve, reject) => {\n      const data = Model.getStorageData(this.constructor.name);\n\n      if (!this.id) {\n        this.setImmutableProps();\n\n        if (data[this.id]) {\n          return reject(new Error(`Oops, you are creating ${this.constructor.name}s too quickly!`));\n        }\n      }\n\n      const error = this.validate();\n      if (error) {\n        return reject(error);\n      }\n\n      data[this.id] = this.serialize();\n\n      localStorage.setItem(this.constructor.name, JSON.stringify(data));\n      resolve(this);\n    });\n  }\n\n  serialize() {\n    return { id: this.id };\n  }\n\n  setImmutableProps(id) {\n    id = (id || this.getNextId());\n\n    Object.defineProperty(this, 'id', {\n      enumerable: true,\n      configurable: false,\n      writable: false,\n      value: id\n    });\n  }\n\n  static getStorageData(storageName = 'Model') {\n    let data = JSON.parse(localStorage.getItem(storageName));\n    if (!data) {\n      data = {};\n    }\n    return data;\n  }\n\n}","import Model from \"./Model\";\n\nexport default class Task extends Model {\n\n  constructor(title = '', description = '') {\n    super();\n\n    this.title = title;\n    this.description = description;\n    this.isComplete = false;\n  }\n\n  getNextId() {\n    return super.getNextId(`${this.constructor.name}`);\n  }\n\n  serialize() {\n    const data = super.serialize();\n    const { title, isComplete } = this;\n\n    Object.assign(data, { title, isComplete });\n\n    return data;\n  }\n\n  validate() {\n    if (!this.title) {\n      return new Error(`Unable to save ${this.constructor.name} without title`);\n    }\n\n    if (typeof (this.isComplete) !== 'boolean') {\n      return new Error(`Unable to save ${this.constructor.name} without isComplete switch`);\n    }\n  }\n\n  static get(id = null) {\n    return super.get(id, 'Task');\n  }\n\n}","import Task from \"./Model/Task\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  function submitHandler(event) {\n    event.preventDefault();\n\n    const data = new FormData(event.target);\n    \n    if (data.has('new-task')) {\n      const task = new Task(data.get('new-task'));\n      task.save();\n    }\n  }\n\n  function addListeners() {\n    document.addEventListener('submit', submitHandler);\n  }\n\n  addListeners();\n});"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvTW9kZWwvTW9kZWwuanMiLCJzcmMvanMvTW9kZWwvVGFzay5qcyIsInNyYy9qcy9hcHAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7O0FDQUE7QUFDQTtBQUNBO0lBQ3FCLEs7QUFDbkIsbUJBQWM7QUFBQTtBQUFHOzs7O1dBRWpCLHFCQUFpQztBQUFBLFVBQXZCLFdBQXVCLHVFQUFULE9BQVM7QUFDL0IsVUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLGNBQU4sQ0FBcUIsV0FBckIsQ0FBYjtBQUVBLGFBQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFQLENBQVksSUFBWixFQUFrQixJQUFsQixHQUF5QixHQUF6QixNQUFrQyxDQUFuQyxDQUFSLEdBQWdELENBQXZEO0FBQ0Q7OztXQUVELGdCQUFPO0FBQUE7O0FBQ0wsYUFBTyxJQUFJLE9BQUosQ0FBWSxVQUFDLE9BQUQsRUFBVSxNQUFWLEVBQXFCO0FBQ3RDLFlBQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxjQUFOLENBQXFCLEtBQUksQ0FBQyxXQUFMLENBQWlCLElBQXRDLENBQWI7O0FBRUEsWUFBSSxDQUFDLEtBQUksQ0FBQyxFQUFWLEVBQWM7QUFDWixVQUFBLEtBQUksQ0FBQyxpQkFBTDs7QUFFQSxjQUFJLElBQUksQ0FBQyxLQUFJLENBQUMsRUFBTixDQUFSLEVBQW1CO0FBQ2pCLG1CQUFPLE1BQU0sQ0FBQyxJQUFJLEtBQUosa0NBQW9DLEtBQUksQ0FBQyxXQUFMLENBQWlCLElBQXJELG9CQUFELENBQWI7QUFDRDtBQUNGOztBQUVELFlBQU0sS0FBSyxHQUFHLEtBQUksQ0FBQyxRQUFMLEVBQWQ7O0FBQ0EsWUFBSSxLQUFKLEVBQVc7QUFDVCxpQkFBTyxNQUFNLENBQUMsS0FBRCxDQUFiO0FBQ0Q7O0FBRUQsUUFBQSxJQUFJLENBQUMsS0FBSSxDQUFDLEVBQU4sQ0FBSixHQUFnQixL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QSxJQUFJLENBQUMsSUFBTDtBQUNEO0FBQ0Y7O0FBRUQsV0FBUyxZQUFULEdBQXdCO0FBQ3RCLElBQUEsUUFBUSxDQUFDLGdCQUFULENBQTBCLFFBQTFCLEVBQW9DLGFBQXBDO0FBQ0Q7O0FBRUQsRUFBQSxZQUFZO0FBQ2IsQ0FqQkQiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBtb2RlbHMuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGVsIHtcbiAgY29uc3RydWN0b3IoKSB7IH1cblxuICBnZXROZXh0SWQoc3RvcmFnZU5hbWUgPSAnTW9kZWwnKSB7XG4gICAgY29uc3QgZGF0YSA9IE1vZGVsLmdldFN0b3JhZ2VEYXRhKHN0b3JhZ2VOYW1lKTtcblxuICAgIHJldHVybiBwYXJzZUludChPYmplY3Qua2V5cyhkYXRhKS5zb3J0KCkucG9wKCkgfHwgMCkgKyAxO1xuICB9XG5cbiAgc2F2ZSgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IE1vZGVsLmdldFN0b3JhZ2VEYXRhKHRoaXMuY29uc3RydWN0b3IubmFtZSk7XG5cbiAgICAgIGlmICghdGhpcy5pZCkge1xuICAgICAgICB0aGlzLnNldEltbXV0YWJsZVByb3BzKCk7XG5cbiAgICAgICAgaWYgKGRhdGFbdGhpcy5pZF0pIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBFcnJvcihgT29wcywgeW91IGFyZSBjcmVhdGluZyAke3RoaXMuY29uc3RydWN0b3IubmFtZX1zIHRvbyBxdWlja2x5IWApKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBlcnJvciA9IHRoaXMudmFsaWRhdGUoKTtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXR1cm4gcmVqZWN0KGVycm9yKTtcbiAgICAgIH1cblxuICAgICAgZGF0YVt0aGlzLmlkXSA9IHRoaXMuc2VyaWFsaXplKCk7XG5cbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuY29uc3RydWN0b3IubmFtZSwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgcmVzb2x2ZSh0aGlzKTtcbiAgICB9KTtcbiAgfVxuXG4gIHNlcmlhbGl6ZSgpIHtcbiAgICByZXR1cm4geyBpZDogdGhpcy5pZCB9O1xuICB9XG5cbiAgc2V0SW1tdXRhYmxlUHJvcHMoaWQpIHtcbiAgICBpZCA9IChpZCB8fCB0aGlzLmdldE5leHRJZCgpKTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnaWQnLCB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgIHZhbHVlOiBpZFxuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGdldFN0b3JhZ2VEYXRhKHN0b3JhZ2VOYW1lID0gJ01vZGVsJykge1xuICAgIGxldCBkYXRhID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzdG9yYWdlTmFtZSkpO1xuICAgIGlmICghZGF0YSkge1xuICAgICAgZGF0YSA9IHt9O1xuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG59IiwiaW1wb3J0IE1vZGVsIGZyb20gXCIuL01vZGVsXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRhc2sgZXh0ZW5kcyBNb2RlbCB7XG5cbiAgY29uc3RydWN0b3IodGl0bGUgPSAnJywgZGVzY3JpcHRpb24gPSAnJykge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgIHRoaXMuaXNDb21wbGV0ZSA9IGZhbHNlO1xuICB9XG5cbiAgZ2V0TmV4dElkKCkge1xuICAgIHJldHVybiBzdXBlci5nZXROZXh0SWQoYCR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfWApO1xuICB9XG5cbiAgc2VyaWFsaXplKCkge1xuICAgIGNvbnN0IGRhdGEgPSBzdXBlci5zZXJpYWxpemUoKTtcbiAgICBjb25zdCB7IHRpdGxlLCBpc0NvbXBsZXRlIH0gPSB0aGlzO1xuXG4gICAgT2JqZWN0LmFzc2lnbihkYXRhLCB7IHRpdGxlLCBpc0NvbXBsZXRlIH0pO1xuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICB2YWxpZGF0ZSgpIHtcbiAgICBpZiAoIXRoaXMudGl0bGUpIHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoYFVuYWJsZSB0byBzYXZlICR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfSB3aXRob3V0IHRpdGxlYCk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiAodGhpcy5pc0NvbXBsZXRlKSAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKGBVbmFibGUgdG8gc2F2ZSAke3RoaXMuY29uc3RydWN0b3IubmFtZX0gd2l0aG91dCBpc0NvbXBsZXRlIHN3aXRjaGApO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQoaWQgPSBudWxsKSB7XG4gICAgcmV0dXJuIHN1cGVyLmdldChpZCwgJ1Rhc2snKTtcbiAgfVxuXG59IiwiaW1wb3J0IFRhc2sgZnJvbSBcIi4vTW9kZWwvVGFza1wiO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XG4gIGZ1bmN0aW9uIHN1Ym1pdEhhbmRsZXIoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY29uc3QgZGF0YSA9IG5ldyBGb3JtRGF0YShldmVudC50YXJnZXQpO1xuICAgIFxuICAgIGlmIChkYXRhLmhhcygnbmV3LXRhc2snKSkge1xuICAgICAgY29uc3QgdGFzayA9IG5ldyBUYXNrKGRhdGEuZ2V0KCduZXctdGFzaycpKTtcbiAgICAgIHRhc2suc2F2ZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZExpc3RlbmVycygpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBzdWJtaXRIYW5kbGVyKTtcbiAgfVxuXG4gIGFkZExpc3RlbmVycygpO1xufSk7Il19"}